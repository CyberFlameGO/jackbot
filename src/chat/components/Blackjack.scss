@import 'global';

%initial-blackjack-styles {
  opacity: 0;
}

@keyframes blackjack {
  0% { @extend %initial-blackjack-styles; }

  100% {
    opacity: 1;
  }
}

.Blackjack {
  @extend %initial-blackjack-styles;
  animation: blackjack $base-transition;
  animation-fill-mode: forwards;
  margin-top: 50px;

  h2 {
    @extend %all-caps;
    @include scale(font-size 14px 24px, line-height 20px 30px);
    color: $red;
  }

  h3 {
    @extend %all-caps;
    margin-bottom: 5px;
  }

  .cards {
    padding: 0;
  }

  .scene {
    @include size(50px, 80px);
    perspective: 200px;
    float: left;
    margin-right: 10px;
  }

  @keyframes flip {
    0% {
      transform: rotateY(180deg);
    } 

    100% {
      transform: rotateY(0deg);
    }
  }

  .card {
    @include size(100%);
    position: relative;
    animation: flip .3s linear;
    animation-fill-mode: forwards;
    transform-style: preserve-3d;
    transform: rotateY(180deg);
    overflow: visible;

    div {
      @include size(100%);
      position: absolute;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
    }

    .front {
      background: $white;
      box-shadow: inset 0 0 0 2px $black;
    }

    .back {
      background: $red;
      transform: rotateY(180deg);
      box-shadow: inset 0 0 0 2px $red;
    }

    .front {
      @extend %all-caps;
      font-size: 28px;
      margin: 0;

      &:before, &:after { font-size: 12px; }

      &:before { @include position(absolute, 0px null null 3px); }
      &:after  { @include position(absolute, null 3px 0px null); }

      &.♥, &.♥ {
        color: $red;

        &:before, &:after { content: '♥'; }
      }

      &.♦, &.♦ {
        color: $red;

        &:before, &:after { content: '♦'; }
      }

      &.♠:before, &.♠:after { content: '♠' }
      &.♣:before, &.♣:after { content: '♣' }
    }
  }

  @for $i from 1 through 5 {
    .scene .card:nth-child($i) {
      animation-delay: $i * .1s;
    }
  }
}